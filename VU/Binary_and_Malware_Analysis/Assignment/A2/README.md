# Dump the inner binary


# Patch the inner binary
After having dumped the inner binary I tried to run it but I got a segmentation fault. Using tools such as `readelf`, `file` and `xxd` I realized that the ELF header was not correct. 
To completely understand what the problems were, I compared byte per byte the inner binary with a simple C binary. 
The first byte that I patched was the endianness one, which was set to Big Endian instead of Little Endian (so I patched it with `0x01`).
I also fixed these fields inside the header:
- the Machine type field wasn't X86_64 (so I patched it to `0x3E`)
- the binary only needed the Program Header, so I patched it to `0x00` (unused)
- the number of entries in the section header table must be 0 (so I patched it to `0x00`)
- the index of the section header table entry that contains the section names must be `0`
  (so I patched it to `0x00`)

Since the inner binary was dumped from memory, the program offsets must be the same as those of the virtual program.
In 3 of them the addresses were not equal, so I patched them as well 
(all three had to be `0x4dc0` to be the same as the virtual offsets).

After these changes, by using `readelf` and `file` everything seemed correct and I was able to run the inner binary and connect to the VUVianConnector.

# Find the password
If you run the inner binary and try to set a random password it will be display the message "Invalid password; aborting". I then found inside ghidra this string and looking at its references I found a function that performs a password comparison similar to the one found in previous assignment.
For each password character entered, the function checks whether it is different from or equal to a given character.
So I found this password: `YYHJQYMLBSXWAUMVHNUE`

By entering the password directly into the inner binary and trying to connect to VUVian, the program says that the password is correct but fails to login, while by entering the password into the original binary (with the various patches of the first assignment) it succeeds in login and connecting to VUVian.





need it for static linking,
